{% extends "base.html" %} 
{% load static %}
{% block css %}
<link rel="stylesheet" href="{% static 'css/photo_list.css' %}">
{% endblock %}
{% block content %}

    <section class="body_wrap">
        <main class="photos">
            {% for photo in object_list %}
                <article class="photos_photo">
                    <section class="user_info">
                        <a href="{% url 'accounts:profile' photo.user.profile.slug %}">
                        {% if photo.user.profile.profile_photo %}
                        <img src="{{ photo.user.profile.profile_photo.url }}" alt="user_photo" class="user_img">
                        {% else %}
                        <img src="{% static 'images/person.png' %}" alt="user_photo" class="user_img">
                        {% endif %}
                        </a>
                        <hgroup class="photo_info">
                            <h3 class="user_nickname">{{ photo.user.profile.nickname }}</h3>
                            <h4 class="place"></h4>
                        </hgroup>
                        <ul class="info_more">
                            <li><i class="fas fa-ellipsis-h"></i>
                                <ul>
                                    <li><a href="{% url 'photo:update' photo.pk %}">수정하기</a></li>
                                    <li>
                                        <form action="{% url 'photo:delete' photo.pk %}" method="post">
                                            {% csrf_token %}
                                            <input type="hidden" name="next" value="{{ request.path }}">
                                            <input type="submit" onclick="return confirm('정말 삭제하시겠습니까?')" class="delete-instagram" value="삭제하기"></input>
                                        </form>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    <img class="photo_img" src="{{photo.image.url}}" alt="photo">
                    <div class="photo_pagination"><span class="page">●</span></div>
                    <section class="comment_wrap">
                        <div class="comment_icons">
                            <div class="column">
                                <i class="far fa-heart"></i>
                                <i class="far fa-comment"></i>
                                <i class="fas fa-location-arrow"></i>
                            </div>
                            <i class="far fa-bookmark"></i>
                        </div>
                        <div class="likes_wrap">
                            <img src="{% static 'images/person.png' %}" alt="person_photo" class="likes_img"><h5 class="likes_count"><span class="user_nickname">h_house님 </span><span class="count">외 74명</span>이 좋아합니다</h5>
                        </div>
                        <h4 class="photo_content"><span class="user_nickname">{{ photo.user.profile.nickname }} </span>  {{ photo.content }}</h4>
                        {% include 'comment/comment_container.html' with comments=photo.comment_set %}
                        <small class="timezone">{{ photo.timedelta_string }}</small>
                        <div class="comment_add">
                            <form class="comment_form" action="{% url 'photo:comment_create' photo.pk %}" method="post">
                                {% csrf_token %}
                                {{ form.as_p }}
                                <input type="hidden" name="next" value="{{ request.path }}">
                                <input type="submit">
                            </form>
                        </div>
                    </section>
                </article>
            {% endfor %}
        </main>
        <aside class="aside">

        </aside>
    </section>
{% endblock %}

{% block js %}
    <script>
        document.getElementsByTagName("textarea").addEventListener("keypress", (event) => {
            if (event.which === 13) {
                event.preventDefault();

                if (event.target.value === '') return
                event.target.closest("form").submit();
            }
        })
    </script>
{% endblock%}